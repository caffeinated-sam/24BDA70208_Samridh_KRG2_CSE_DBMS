CREATE TABLE BOOKS(
ID INT PRIMARY KEY,
NAME VARCHAR(20) NOT NULL,
AUTHOR_NAME VARCHAR(20) NOT NULL
)

INSERT INTO BOOKS VALUES(1,'HARRY POTTER', 'JK ROWLING')
INSERT INTO BOOKS VALUES(2,'THE IDIOT', 'FYODOR M. DOSTOEVSKY', 1)


ALTER TABLE BOOKS
ADD COUNT INT CHECK(COUNT>=1)

SELECT * FROM BOOKS

UPDATE BOOKS
SET COUNT=3
WHERE ID=1

UPDATE BOOKS
SET AUTHOR_NAME='FYODOR DOSTOEVSKY'
WHERE ID=2

CREATE TABLE LIBRARY_VISITOR_USER(
USER_ID INT PRIMARY KEY,
USER_NAME VARCHAR(20),
AGE INT CHECK(AGE>17) NOT NULL,
EMAIL VARCHAR(20) UNIQUE NOT NULL
)

INSERT INTO LIBRARY_VISITOR_USER(USER_ID,USER_NAME,AGE,EMAIL)
VALUES(111,'VINAY',19, 'MSVINAY777@GMAIL.COM')

SELECT * FROM LIBRARY_VISITOR_USER

ALTER TABLE LIBRARY_VISITOR_USER
DROP COLUMN EMAIL

ALTER TABLE LIBRARY_VISITOR_USER
ADD COLUMN EMAIL VARCHAR(30) UNIQUE

UPDATE LIBRARY_VISITOR_USER
SET EMAIL='DEFAULT@GMAIL.COM'



CREATE TABLE BOOK_ISSUE(
BOOK_ISSUE_ID INT PRIMARY KEY,
BOOK_ID INT REFERENCES BOOKS(ID),
USER_ID INT REFERENCES LIBRARY_VISITOR_USER(USER_ID) NOT NULL,
BOOK_ISSUE_DATE DATE NOT NULL
)


INSERT INTO BOOK_ISSUE VALUES(1,2,111,'2026-01-10')

SELECT * FROM BOOK_ISSUE

CREATE ROLE LIBRANIAN
WITH LOGIN PASSWORD 'WOWOWOWOW'

GRANT SELECT,INSERT,DELETE,INSERT,UPDATE ON BOOKS TO LIBRANIAN
GRANT SELECT,INSERT,DELETE,INSERT,UPDATE ON BOOK_ISSUE TO LIBRANIAN

REVOKE  SELECT,INSERT,DELETE,INSERT,UPDATE ON BOOKS FROM LIBRANIAN
