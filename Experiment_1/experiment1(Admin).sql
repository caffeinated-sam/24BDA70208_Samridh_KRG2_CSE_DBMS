
Create table if not exists books(
ID int primary key,
Name varchar(20) not null,
Author_Name Varchar(20) not null
);


ALTER TABLE books
ADD COLUMN IF NOT EXISTS book_count INT CHECK (book_count >= 1);


update books
set book_count = 3
where id = 1;
select * from books;


create table if not exists LIBRARY_VISITOR_USER
(
USER_ID INT PRIMARY KEY,
USER_NAME VARCHAR(20),
USER_AGE INT CHECK(USER_AGE>=17),
USER_EMAIL VARCHAR(20) UNIQUE NOT NULL
);

INSERT INTO LIBRARY_VISITOR_USER(USER_ID,USER_NAME,USER_AGE,USER_EMAIL)
VALUES(101,'UTKARSH',20,'UTKARSH@GMAIL.COM');

SELECT * FROM LIBRARY_VISITOR_USER;

-- drop email


-- CHANGE SIZE



-- ADD EMAIL AGAIN
UPDATE LIBRARY_VISITOR_USER
SET USER_EMAIL = 'UTKARSH@GMAIL.COM'
WHERE USER_ID = 101;

SELECT * FROM LIBRARY_VISITOR_USER;
-- add book issue table
CREATE TABLE BOOK_ISSUE(
BOOK_ISSUE_ID INT PRIMARY KEY,
BOOK_ID INT REFERENCES books(ID) NOT NULL,
USER_ID INT REFERENCES LIBRARY_VISITOR_USER(USER_ID) NOT NULL,
BOOK_ISSUE DATE NOT NULL
);

INSERT INTO BOOK_ISSUE VALUES(5552,1,101,CURRENT_DATE);
SELECT * FROM BOOK_ISSUE;

-- add role

CREATE ROLE LIBRARIAN
WITH LOGIN PASSWORD 'ROOT'

Grant SELECT, INSERT, DELETE,UPDATE ON books TO LIBRARIAN;
Grant SELECT, INSERT, DELETE,UPDATE ON BOOK_ISSUE TO LIBRARIAN;
Grant SELECT, INSERT, DELETE,UPDATE ON LIBRARY_VISITOR_USER TO LIBRARIAN;

-- revoke
REVOKE SELECT, INSERT, DELETE,UPDATE ON books FROM LIBRARIAN;
